# dependencies란 무엇일까?

dependencies는 여러 종류가 있는데 이번 장에서는 그 종류와 세부 사항에 대해서 다룬다.
예를 들어, devdependencies의 경우 배포 단계에서 필요하지 않은 패키지가 담기는데
패키지를 개발하는게 아니라면 크게 신경쓰지 않아도 되는 플드이다. 프로젝트의 성격에 따라 왜 이렇게 나누는지 한번 알아보자.

## npm 버전과 버전에 사용되는 특수 기호

dependency를 보면 `^`기호를 심심치 않게 볼 수 있다. 이는 version 캐럿으로 해당 버전과 호환되는 버전까지 설치한다는 의미이다.
만약 `"react": "^18.2.0"`라고 명시되어있으면 `18.2.0`버전까지 호환될 수 있게 주 버전이 19 이전까지말 설치된다.

> `18.2.0`을 앞에서부터 주, 부, 수버전이라고 부르는데 이에 대해서 더 알고 싶다면 1.2장 유의적 버전을 참고해보자.

`^` 기호 이외에도 `~` 기호(틸드 기호)가 있는데 이는 수 버전까지만 호환한다. 부 버전의 변경을 막음으로써 추가되는 신규 API를 막을 수 있다. 틸드 기호는 보수적으로 버그 수정에 대해서만 대응하고 싶은 경우에 사용된다.

> TMI
>
> croissant과 ARAMS에는 틸드 기호가 사용되지 않는다. 대부분 캐럿 기호로 명시되어있다.

마지막으로 에스터리스크라는 `*` 기호가 있는데 이는 최신 버전을 뜻하는 것으로 `npm install`를 실행하면 최신 버전을 설치한다. 다시 말해서 쓸 일이 거의 없다.

## dependencies와 devdependencies

dependencies는 배포한 서비스에서 그리고 devdependencies는 배포 이전에 사용되는 패키지를 명시해놓으면 된다고 생각했는데 아니었다. 기능적으로만 본다면 패키지를 개발하는 것이 아니라면 크게 상관하지 않아도된다.

그 이유에 대해서 알아보자.

dependencies에 명시된 패키지는 npm install할 때 무조건 설치된다. 이 의미는 설치된 패키지의 dependencies에도 적용된다. 그래서 작은 패키지를 하나 설치하더라도 실제로는 여러 개의 패키지가 깊은 depth로 설치되는 걸 흔히 볼 수 있다.

> 그래서 패키지 개발자는 이를 신경써서 관리하는 것이 매우 중요하다.

반면에 devdependencies의 패키지는 dependencies의 패키지와 다르게 패키지의 패키지로써 설치되지 않는다.
예를 들어서, a라는 패키지가 b라는 dependencies, c라는 devdependencies를 가지고 있다고 할 때 a를 설치하면 b도 같이 설치되지만 c는 설치되지 않는다.

하지만 위 특징은 패키지를 개발하는 것이 아니라면 굳이 신경 쓸 필요가 없다. 왜냐하면 일반적인 프로젝트는 다른 프로젝트에서 사용되지 않을 뿐더러 배포할 때 최종 번들 사이즈에 영향을 미치지 않기 때문이다.

> 결국 dependencies와 devdependencies의 주요 차이점은 "해당 패키지가 다른 패키지에서 설치될 때 설치되는가?"이다. 그래서 일반적인 어플리케이션에서 사용하기에는 설계 자체가 잘못됐다는 의견도 있다.

## peerDependencies

peerDependencies는 일반적인 어플리케이션에서 사용되지 않는 비교적 낯선 필드이다. npm 공식 문서에서는 이렇게 섦명한다.

> 일부 특수한 경우에는 특정 패키지를 직접 require하지 않으면서도 호스트 도구 또는 라이브러리와 패키지의 호환성을 표현하고자 하는 경우도 있다. 이는 보통 플러그인이라도 불리며, 호스트 문서에서 기대되고 명시된 특정 인터페이스를 노출하는 모듈일 수 있다.

말이 조금 어려운데 중요한 부분은 "직접 require하지 않으면서도"이다. 즉, 직접 사용하지는 않아도 연관되어있는 패키지를 명시하는 필드라는 것이다.

예시를 보면 더 이해하기 쉽다. 아래와 같은 훅을 가진 패키지가 있다고 가정해보자

```js
const useSum = (a, b) => {
  return a + b;
};

export default useSum;
```

그리고 이 패키지는 react에서 사용되기 위해서 만들어졌다고 할 때 peerDependencies에 react를 명시할 수 있다.
왜냐하면 react를 직접적으로 사용하진 않지만 연관이 되어있기 때문이다.

peedDependencies는 아래 두 가지 의미를 가지고 있다.

1. 호환성 선언 용도
2. 사용자에게 특정 패키지 설치에 주의를 주는 용도
